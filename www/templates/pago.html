<ion-view view-title="Pago">
    <ion-content has-header="true" padding="true">
        <div class="row" ng-show="hasProductsWithRecipe">
            <div class="col balanced-bg text-center" style="color: white;">1</div>
            <div class="col balanced-bg text-center" style="color: white;">2</div>
            <div class="col balanced-bg text-center" style="color: white;">3</div>
            <div class="col balanced-bg text-center" style="color: white;">4</div>
        </div>
        <div class="row" ng-show="!hasProductsWithRecipe">
            <div class="col balanced-bg text-center" style="color: white;">1</div>
            <div class="col balanced-bg text-center" style="color: white;">2</div>
            <div class="col balanced-bg text-center" style="color: white;">3</div>
        </div>
        <ion-list>
          <ion-radio ng-model="seleccion.numero" ng-value="card.id"
          ng-repeat="card in tarjetas"  ng-show="card.active">

            <img src="img/ico_mastercard.jpg" ng-if="card.brand=='mastercard'" />
            <img src="img/ico_visa.jpg" ng-if="card.brand=='visa'" />
            <img src="img/tarjeta-american-express-icono-8441-48.png" ng-if="card.brand=='AMEX'"/>
            **** **** **** {{card.last4}}
          </ion-radio>
          <!--ion-radio ng-model="seleccion.numero" ng-value="0">
            Nueva
          </ion-radio-->
          <ion-item class="item-button-right" ng-show="seleccion.numero!=0">
              Nueva tarjeta
                <button class="button button-energized" ng-click="seleccion.numero = 0">
                  <i class="icon ion-card"></i>
                </button>
          </ion-item>
          <div  ng-show="seleccion.numero!=0">
          <ion-checkbox ng-model="validar.terminos">Acepta los terminos y condiciones</ion-checkbox>
          <div class="item item-button-right">
                Ver terminos y condiciones
                <button class="button button-balanced" ng-click="showModalTerminos()">
                  <i class="icon ion-eye"></i>
                </button>
          </div>
          </div>
        </ion-list>
        <p class="padding text-center">
            <button ng-show="seleccion.numero!=0" class="button button-block button-balanced" ng-disabled="!validar.terminos" ng-click="doPago()">Hacer Pedido</button>
        </p>
        <form ng-show="seleccion.numero==0" id="formRegister" ng-submit="doPago()">
            <div class="list">
                <label class="item item-input">
                    <span class="input-label">Nombre: </span>
                    <input type="text" name="name" ng-model="tarjeta.card.name" placeholder="Nombre de cliente">
                </label>
                <label class="item item-input">
                    <span class="input-label">Numero de tarjeta:</span>
                    <input type="hidden" name="number" ng-model="tarjeta.card.number" placeholder="Numero de tarjeta">
                </label>
                <div class="row">
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" placeholder="----" name="tarj_part1" id="tarj_part1" ng-model="tarj.part1" placeholder="" maxlength="4" style="text-align: center;" ng-keyup="overTarjeta1()">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" placeholder="----" name="tarj_part2" id="tarj_part2" ng-model="tarj.part2" placeholder="" maxlength="4" style="text-align: center;" ng-keyup="overTarjeta2()">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" placeholder="----" name="tarj_part3" id="tarj_part3" ng-model="tarj.part3" placeholder="" maxlength="4" style="text-align: center;" ng-keyup="overTarjeta3()">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" placeholder="----" name="tarj_part4" id="tarj_part4" ng-model="tarj.part4" placeholder="" maxlength="4" style="text-align: center;" ng-keyup="overTarjeta4()">
                        </label>
                    </div>
                </div>
                <label class="item item-input">
                    <span class="input-label">Vigencias y CVC:</span>
                </label>
                <div class="row">
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" name="exp_month" id="exp_month" ng-model="tarjeta.card.exp_month" placeholder="MM" maxlength="2" style="text-align: center;">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input" style="border: none;">
                            <input type="text" value="/" disabled="disabled" style="background: transparent!important; text-align: center;">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" name="exp_year" id="exp_year" ng-model="tarjeta.card.exp_year" placeholder="AAAA" maxlength="4" style="text-align: center;">
                        </label>
                    </div>
                    <div class="col">
                        <label class="item item-input">
                            <input type="text" style="padding-right: 10px;" name="cvc" id="cvc" ng-model="tarjeta.card.cvc" placeholder="CVC" maxlength="4" style="text-align: center;">
                        </label>
                    </div>
                </div>
                <ion-checkbox ng-model="validar.terminos">Acepta los terminos y condiciones</ion-checkbox>
                <div class="item item-button-right">
                      Ver terminos y condiciones
                      <a href="#" class="button button-balanced" ng-click="showModalTerminos()">
                        <i class="icon ion-eye"></i>
                      </a>
                </div>
                <label class="item">
                    <button class="button button-block button-balanced"  ng-disabled="!validar.terminos" type="submit">Hacer Pedido</button>
                </label>
            </div>
        </form>
        <p class="text-center assertive">Tu cobro se realizar√° a la entrega de tu pedido</p>
    </ion-content>
</ion-view>
